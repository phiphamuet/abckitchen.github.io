//
   Created by PHI on 5/18/2015.
.reservation
   .container
      .reservation-form
         .col-md-6.reservation-right
            link(rel="stylesheet" href="css/clndr.css")
            //#full-clndr
            #mini-clndr
            //#clndr-3
            script(type="text/template", id="template-calendar")
               <div class="clndr-controls">
               <div class="clndr-previous-button">&lsaquo;</div>
               <div class="month"><%= month %></div>
               <div class="clndr-next-button">&rsaquo;</div>
               </div>
               <div class="clndr-grid">
               <div class="days-of-the-week">
               <% _.each(daysOfTheWeek, function(day) { %>
               <div class="header-day"><%= day %></div>
               <% }); %>
               <div class="days">
               <% _.each(days, function(day) { %>
               <div class="<%= day.classes %>"><%= day.day %></div>
               <% }); %>
               </div>
               </div>
               </div>
               <div class="clndr-today-button">Today</div>
            script(src="js/underscore.js")
            script(src="js/moment.js")
            script(src="js/clndr.js")
            script.
               $(function () {
                  // PARDON ME while I do a little magic to keep these events relevant for the rest of time...
                  var currentMonth = moment().format('YYYY-MM');
                  var nextMonth = moment().add('month', 1).format('YYYY-MM');
                  var daysOfTheWeek=['CN','T2','T3','T4','T5','T6','T7'];
                  var events = [
                     {
                        date: currentMonth + '-' + '10',
                        title: 'Persian Kitten Auction',
                        location: 'Center for Beautiful Cats'
                     },
                     {date: currentMonth + '-' + '19', title: 'Cat Frisbee', location: 'Jefferson Park'},
                     {
                        date: currentMonth + '-' + '23',
                        title: 'Kitten Demonstration',
                        location: 'Center for Beautiful Cats'
                     },
                     {
                        date: nextMonth + '-' + '07',
                        title: 'Small Cat Photo Session',
                        location: 'Center for Cat Photography'
                     }
                  ];
                  clndr = $('#full-clndr').clndr({
                     template: $('#full-clndr-template').html(),
                     events: events,
                     forceSixRows: true
                  });
                  $('#mini-clndr').clndr({
                     //template: $('#template-calendar').html(),
                     events: events,
                     clickEvents: {
                        click: function (target) {
                           if (target.events.length) {
                              var daysContainer = $('#mini-clndr').find('.days-container');
                              daysContainer.toggleClass('show-events', true);
                              $('#mini-clndr').find('.x-button').click(function () {
                                 daysContainer.toggleClass('show-events', false);
                              });
                           }
                        }
                     },
                     adjacentDaysChangeMonth: true,
                     forceSixRows: true
                  });
                  $('#clndr-3').clndr({
                     template: $('#clndr-3-template').html(),
                     events: events,
                     showAdjacentMonths: false
                  });
                  // $('#clndr-4').clndr({
                  //   template: $('#clndr-4-template').html(),
                  //   events: events,
                  //   lengthOfTime: {
                  //     days: 7,
                  //     interval: 7
                  //   }
                  // });
               });